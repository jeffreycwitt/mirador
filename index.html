<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="build/mirador/css/mirador-combined.css">
    <title>Mirador Viewer</title>
    <style type="text/css">
     #viewer {
       width: 100%;
       height: 100%;
       position: fixed;
     }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script src="build/mirador/mirador.js"></script>
    <script type="text/javascript">

     $(function() {
       // Called without "let" or "var"
       // so we can play with it in the browser
       myMiradorInstance = Mirador({
         "id": "viewer",
         "layout": "1x1",
         "data": [
           /*{ "manifestUri": "https://iiif.lib.harvard.edu/manifests/drs:48309543", "location": "Harvard University"},
           { "manifestUri": "https://iiif.lib.harvard.edu/manifests/drs:5981093", "location": "Harvard University"},
           { "manifestUri": "https://iiif.lib.harvard.edu/manifests/via:olvwork576793", "location": "Harvard University"},
           { "manifestUri": "https://iiif.lib.harvard.edu/manifests/drs:14033171", "location": "Harvard University"},
           { "manifestUri": "https://iiif.lib.harvard.edu/manifests/drs:46909368", "location": "Harvard University"},
           { "manifestUri": "https://iiif.lib.harvard.edu/manifests/drs:48331776", "location": "Harvard University"},
           { "manifestUri": "http://iiif.harvardartmuseums.org/manifests/object/299843", "location": "Harvard University"},
           { "manifestUri": "http://iiif.harvardartmuseums.org/manifests/object/304136", "location": "Harvard University"},
           { "manifestUri": "http://iiif.harvardartmuseums.org/manifests/object/198021", "location": "Harvard University"},
           { "manifestUri": "http://iiif.harvardartmuseums.org/manifests/object/320567", "location": "Harvard University"},
           { "manifestUri": "https://purl.stanford.edu/qm670kv1873/iiif/manifest.json", "location": "Stanford University"},
           { "manifestUri": "https://purl.stanford.edu/jr903ng8662/iiif/manifest.json", "location": "Stanford University"},
           { "manifestUri": "https://purl.stanford.edu/ch264fq0568/iiif/manifest.json", "location": "Stanford University"},
           { "manifestUri": "https://purl.stanford.edu/wh234bz9013/iiif/manifest.json", "location": "Stanford University"},
           { "manifestUri": "https://purl.stanford.edu/rd447dz7630/iiif/manifest.json", "location": "Stanford University"},
           { "manifestUri": "http://dms-data.stanford.edu/data/manifests/Stanford/ege1/manifest.json", "location": "Stanford University"},
           { "manifestUri": "http://dams.llgc.org.uk/iiif/4574752/manifest.json", "location": "National Library of Wales"},
           { "manifestUri": "http://dev.llgc.org.uk/iiif/ww1posters.json", "location": "National Library of Wales"},
           { "manifestUri": "http://dams.llgc.org.uk/iiif/newspaper/issue/3320640/manifest.json", "location": "National Library of Wales"},
           { "manifestUri": "http://dams.llgc.org.uk/iiif/2.0/1465298/manifest.json", "location": "National Library of Wales"},
           { "manifestUri": "http://manifests.ydc2.yale.edu/manifest/Admont23", "location": "Yale University"},
           { "manifestUri": "http://manifests.ydc2.yale.edu/manifest/Admont43", "location": "Yale University"},
           { "manifestUri": "http://manifests.ydc2.yale.edu/manifest/BeineckeMS10", "location": "Yale University"},
           { "manifestUri": "https://manifests.britishart.yale.edu/manifest/5005", "location": "Yale Center For British Art"},
           { "manifestUri": "https://manifests.britishart.yale.edu/manifest/1474", "location": "Yale Center For British Art"},
           { "manifestUri": "http://iiif.bodleian.ox.ac.uk/iiif/manifest/51a65464-6408-4a78-9fd1-93e1fa995b9c.json", "location": "Bodleian Libraries"},
           { "manifestUri": "http://iiif.bodleian.ox.ac.uk/iiif/manifest/f19aeaf9-5aba-4cee-be32-584663ff1ef1.json", "location": "Bodleian Libraries"},
           { "manifestUri": "http://iiif.bodleian.ox.ac.uk/iiif/manifest/3b31c0a9-3dab-4801-b3dc-f2a3e3786d34.json", "location": "Bodleian Libraries"},
           { "manifestUri": "http://iiif.bodleian.ox.ac.uk/iiif/manifest/e32a277e-91e2-4a6d-8ba6-cc4bad230410.json", "location": "Bodleian Libraries"},
           { "manifestUri": "http://gallica.bnf.fr/iiif/ark:/12148/btv1b84539771/manifest.json", "location": 'BnF'},
           { "manifestUri": "http://gallica.bnf.fr/iiif/ark:/12148/btv1b10500687r/manifest.json", "location": 'BnF'},
           { "manifestUri": "http://gallica.bnf.fr/iiif/ark:/12148/btv1b55002605w/manifest.json", "location": 'BnF'},
           { "manifestUri": "http://gallica.bnf.fr/iiif/ark:/12148/btv1b55002481n/manifest.json", "location": 'BnF'},
           { "manifestUri": "http://www.e-codices.unifr.ch/metadata/iiif/sl-0002/manifest.json", "location": 'e-codices'},
           { "manifestUri": "http://www.e-codices.unifr.ch/metadata/iiif/bge-cl0015/manifest.json", "location": 'e-codices'},
           { "manifestUri": "http://www.e-codices.unifr.ch/metadata/iiif/fmb-cb-0600a/manifest.json", "location": 'e-codices'},
           { "manifestUri": "https://data.ucd.ie/api/img/manifests/ucdlib:33064", "location": "University College Dublin"},
           { "manifestUri": "https://data.ucd.ie/api/img/manifests/ucdlib:40851", "location": "University College Dublin"},
           { "manifestUri": "https://data.ucd.ie/api/img/manifests/ucdlib:30708", "location": "University College Dublin"},
           { "manifestUri": "http://dzkimgs.l.u-tokyo.ac.jp/iiif/zuzoubu/12b02/manifest.json", "location": "University of Tokyo"},
           { "manifestUri": "http://www2.dhii.jp/nijl/NIJL0018/099-0014/manifest_tags.json", "location": "NIJL"},
           { "manifestUri": "http://digi.vatlib.it/iiif/MSS_Vat.lat.3225/manifest.json", "location": "Vatican Library"},
           { "manifestUri": "http://media.nga.gov/public/manifests/nga_highlights.json", "location": "National Gallery of Art"}*/
           //{ "manifestUri": "http://scta.info/iiif/rothwellcommentary/penn/manifest"},

           //{"manifestUri": "http://sims-dev.library.upenn.edu:8084/iiif/mscodex855.json"},
           //{"manifestUri": "http://sims-dev.library.upenn.edu:8084/iiif/mscodex686.json"},
           {"manifestUri": "http://iiif.biblissima.fr/gallica/btv1b10510321r/manifest.json"}
           //{"manifestUri": "http://sims-dev.library.upenn.edu:8084/iiif/mscodex855/manifest"},
           //{"manifestUri": "http://sims-dev.library.upenn.edu:8084/iiif/mscodex686/manifest"}
         ],
         "windowObjects": [],
         "annotationEndpoint": { "name":"Local Storage", "module": "LocalStorageEndpoint" }
       });


//        //BEGIN LDN PLUGIN
//         notification_urls = []
//         var _this = {}
//         myMiradorInstance.eventEmitter.subscribe("ADD_WINDOW", function(event, data){
//           console.log(data)
//           _this = data
//
//           var serviceProperty = _this.manifest.jsonLd.service;
//           var service = [];
//           if (serviceProperty === undefined){
//             service = null;
//           }
//           else if (serviceProperty.constructor === Array){
//             for (var i = 0; i < serviceProperty.length; i++){
//               if (serviceProperty[i].profile === "http://www.w3.org/ns/ldp#inbox") {
//                 //returns the first service object with the correct context
//                 service.push(serviceProperty[i]);
//               }
//             }
//           }
//           else if (_this.manifest.jsonLd.service.profile === "http://www.w3.org/ns/ldp#inbox"){
//             service.push(_this.manifest.jsonLd.service);
//           }
//           else {
//             //no service object with the right context is found
//             service = null;
//           }
//           if (service.length > 0){
//             var service_url = service[0]["@id"];
//
//               var inboxRequest = jQuery.ajax({
//                 url: service_url,
//                 dataType: 'json',
//                 async: true
//               });
//               inboxRequest.done(function(data){
//                   // 0 index means its only going to get the first notification
//                 for (i = 0; i < data.contains.length; i++){
//                 //var note_url = data.contains[0].url;
//                 notification_urls.push(data.contains[i].url)
//                 }
//                 $(".window-manifest-navigation").append("<a href='#' id='notifications'><i class='material-icons'>add_alert</i>" + data.contains.length + "</a>");
//               });
//             }
//           });
//
//           function showNotifications(){
//
//             //var response = confirm("There is an available table of contents for this codex published by the Scholastic Commentaries and Text Archive (http://scta.info). Would you like to retrieve this table of contents?");
//             //if (response === true){
//             jQuery(document.body).append("<div id='notifications-wrapper' style='background: white; position: fixed; width: 50%; height: 50%; top: 25%; left: 25%;'><h1>Notifications of Related Content</h1><ul></ul></div>");
//             for (i = 0; i < notification_urls.length; i++){
//               console.log(notification_urls[i]);
//               note_url = notification_urls[i];
//               var notificationRequest = jQuery.ajax({
//                 url: note_url,
//                 dataType: 'json',
//                 async: true
//               });
//               notificationRequest.done(function(data){
//                 var range_url = data.object;
//                 console.log(range_url);
//                 jQuery("#notifications-wrapper").append("<li><a href='#' class='supplement' data-url='" + range_url + "'>" + range_url + "</a></li>")
//               });
//             }
//
//             //}
//           }
//           function retrieveData(url){
//
//             var rangeRequest = jQuery.ajax({
//               url: url,
//               dataType: 'json',
//               async: true
//             });
//             rangeRequest.done(function(data){
//               _this.manifest.jsonLd.structures = data.ranges;
//
//               console.log('structuresUpdated.' + _this.id)
//               _this.eventEmitter.publish('structuresUpdated');
//             });
//
//           }
//
//           jQuery(document).on("click", "#notifications", function(){
//             console.log("Test1");
//             showNotifications();
//           });
//           jQuery(document).on("click", ".supplement", function(){
//             console.log("Test2");
//             var url = $(this).attr('data-url')
//             retrieveData(url);
//             $("#notifications-wrapper").remove();
//           });
//
 });





    </script>
    <link rel="stylesheet" type="text/css" href="ldn-plugin.css">
    <script src="ldn-plugin.js"/>



    <!-- This enables live reloading of assets for improved developer experience. -->



    <!-- Remove if copying this page as a basis for another project. -->
    <script src="//localhost:35729/livereload.js"></script>
  </body>
</html>
